<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#2c3e50">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Francisco Running - Calculateur estimations des temps de courses</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #ecf0f1;
    min-height: 100vh;
    padding: 20px;
}
.container {
    max-width: 650px;
    margin: 0 auto;
    background: white;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
.header { display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #ecf0f1; }
.header .runner-icon { font-size: 32px; }
.header h1 { color: #2c3e50; font-size: 24px; font-weight: 600; }
.section { margin-bottom: 30px; }
.section-title { color: #2c3e50; font-size: 18px; font-weight: 600; margin-bottom: 15px; }
.input-row { display: flex; gap: 10px; margin-bottom: 15px; }
.input-group { flex: 1; }
label { display: block; margin-bottom: 6px; color: #34495e; font-weight: 500; font-size: 14px; }
select { width: 100%; padding: 12px; border: 1px solid #bdc3c7; border-radius: 6px; font-size: 16px; -webkit-appearance: none; -moz-appearance: none; appearance: none; background: white; }
select:focus { outline: none; border-color: #3498db; }
button {
    width: 100%; padding: 14px; background: #2c3e50; color: white; border: none; border-radius: 6px;
    font-size: 16px; font-weight: 500; cursor: pointer; transition: background 0.3s; margin-top: 10px;
}
button:hover { background: #34495e; }
button:active { transform: scale(0.98); }
.results { display: none; margin-top: 30px; }
.results.show { display: block; }
.predictions { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #e0e0e0; }
.predictions h3 { color: #2c3e50; font-size: 16px; margin-bottom: 15px; font-weight: 600; }
.prediction-item { display: grid; grid-template-columns: 120px 1fr 1fr; gap: 15px; padding: 12px 0; border-bottom: 1px solid #e0e0e0; align-items: center; }
.prediction-item:last-child { border-bottom: none; }
.prediction-distance { color: #5a6c7d; font-weight: 600; }
.prediction-time { color: #2c3e50; font-weight: 600; font-size: 16px; }
.prediction-pace { color: #7f8c8d; font-size: 14px; }
.vo2max-box { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 25px; border-radius: 8px; text-align: center; margin-top: 20px; }
.vo2max-label { font-size: 14px; opacity: 0.9; margin-bottom: 8px; }
.vo2max-value { font-size: 48px; font-weight: 700; }
.vo2max-unit { font-size: 18px; opacity: 0.9; margin-top: 5px; }
@media (max-width: 768px) { .container { padding: 20px; } .input-row { flex-direction: column; } .prediction-item { grid-template-columns: 1fr; gap: 5px; } .vo2max-value { font-size: 36px; } }
@media (max-width: 480px) { .header h1 { font-size: 20px; } .header .runner-icon { font-size: 28px; } }
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <span class="runner-icon">üèÉ‚Äç‚ôÇÔ∏è</span>
        <h1>francisco.running</h1>
    </div>

    <div class="section">
        <h2 class="section-title">Calculer votre estimation de temps de course</h2>
        
        <div class="input-group">
            <label>Distance de course</label>
            <select id="distance">
                <option value="1000">1 km</option>
                <option value="1500">1500 m</option>
                <option value="1609">1 mile</option>
                <option value="3000">3 km</option>
                <option value="5000" selected>5 km</option>
                <option value="10000">10 km</option>
                <option value="15000">15 km</option>
                <option value="21097.5">Semi-marathon</option>
                <option value="42195">Marathon</option>
            </select>
        </div>

        <div class="input-row">
            <div class="input-group">
                <label>Heures</label>
                <select id="hours"></select>
            </div>
            <div class="input-group">
                <label>Minutes</label>
                <select id="minutes"></select>
            </div>
            <div class="input-group">
                <label>Secondes</label>
                <select id="seconds"></select>
            </div>
        </div>

        <button onclick="calculate()">Calculer</button>
    </div>

    <div class="results" id="results">
        <div class="predictions">
            <h3>üéØ Temps pr√©dits par distance</h3>
            <div id="predictions"></div>
        </div>

        <div class="vo2max-box">
            <div class="vo2max-label">Votre VO2max</div>
            <div class="vo2max-value" id="vo2maxValue">--</div>
            <div class="vo2max-unit">ml/kg/min</div>
        </div>
    </div>
</div>

<script>
// Remplissage des selects pour la roulette
const hoursSelect = document.getElementById('hours');
const minutesSelect = document.getElementById('minutes');
const secondsSelect = document.getElementById('seconds');

for(let i=0;i<=10;i++){ hoursSelect.innerHTML += `<option value="${i}">${i}</option>`; }
for(let i=0;i<60;i++){ minutesSelect.innerHTML += `<option value="${i}">${i}</option>`; secondsSelect.innerHTML += `<option value="${i}">${i}</option>`; }

// Formules VO2max / VDOT
function calculateVO2(velocity){ return -4.60 + 0.182258 * velocity + 0.000104 * velocity**2; }
function calculatePercentVO2Max(time){ return 0.8 + 0.1894393*Math.exp(-0.012778*time)+0.2989558*Math.exp(-0.1932605*time); }
function calculateVDOT(distance, timeInSeconds){
    const timeInMinutes = timeInSeconds/60;
    const velocity = distance / timeInMinutes;
    return calculateVO2(velocity)/calculatePercentVO2Max(timeInMinutes);
}
function predictTime(vdot,distance){
    let low=60, high=36000, bestTime=low;
    for(let i=0;i<100;i++){
        const mid=(low+high)/2;
        const testVDOT=calculateVDOT(distance, mid);
        if(Math.abs(testVDOT-vdot)<0.01){ bestTime=mid; break; }
        if(testVDOT>vdot){ low=mid; } else { high=mid; }
        bestTime=mid;
    }
    return bestTime;
}
function formatTime(seconds){
    const h=Math.floor(seconds/3600), m=Math.floor((seconds%3600)/60), s=Math.round(seconds%60);
    return h>0?`${h}h${m.toString().padStart(2,'0')}'${s.toString().padStart(2,'0')}"`:`${m}'${s.toString().padStart(2,'0')}"`;
}
function formatPace(secondsPerKm){
    const m=Math.floor(secondsPerKm/60), s=Math.round(secondsPerKm%60);
    return `${m}:${s.toString().padStart(2,'0')}`;
}

function calculate(){
    const distance=parseFloat(document.getElementById('distance').value);
    const hours=parseInt(hoursSelect.value)||0;
    const minutes=parseInt(minutesSelect.value)||0;
    const seconds=parseInt(secondsSelect.value)||0;
    const totalSeconds = hours*3600 + minutes*60 + seconds;
    if(totalSeconds===0){ alert('Veuillez entrer un temps valide'); return; }

    const vo2max = calculateVDOT(distance,totalSeconds);

    // Pr√©dictions
    const races=[
        {name:'1 km',distance:1000},{name:'1500 m',distance:1500},{name:'3 km',distance:3000},{name:'5 km',distance:5000},
        {name:'10 km',distance:10000},{name:'15 km',distance:15000},{name:'Semi-marathon',distance:21097.5},{name:'Marathon',distance:42195}
    ];
    let predictionsHTML='';
    races.forEach(race=>{
        const time=predictTime(vo2max,race.distance);
        const pace=(time/(race.distance/1000));
        predictionsHTML+=`
        <div class="prediction-item">
            <div class="prediction-distance">${race.name}</div>
            <div class="prediction-time">${formatTime(time)}</div>
            <div class="prediction-pace">${formatPace(pace)}/km</div>
        </div>`;
    });
    document.getElementById('predictions').innerHTML=predictionsHTML;

    // Affichage VO2max en bas
    document.getElementById('vo2maxValue').textContent = Math.round(vo2max);

    document.getElementById('results').classList.add('show');
    document.getElementById('results').scrollIntoView({behavior:'smooth', block:'nearest'});
}
</script>
</body>
</html>
